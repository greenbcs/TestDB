<!doctype html>
<html class="no-js fixed-layout">
<head>
    <meta http-equiv="Pragma" contect="no-cache">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Homepage</title>
    <meta name="description" content="这是一个 index 页面">
    <meta name="keywords" content="index">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="renderer" content="webkit">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <link rel="icon" type="image/png" href="assets/i/juno.png">
    <link rel="apple-touch-icon-precomposed" href="assets/i/app-icon72x72@2x.png">
    <meta name="apple-mobile-web-app-title" content="Amaze UI" >
    <link rel="stylesheet" href="assets/css/amazeui.min.css">
    <link rel="stylesheet" href="assets/css/admin.css">
    <style>
        .am-align-left p{
            text-indent: 2em;
        }
        .sideActive{
            color: #0e90d2 !important;
        }

    </style>
</head>
<body>
<!--[if lte IE 9]>
<p class="browsehappy">你正在使用<strong>过时</strong>的浏览器。 请 <a href="http://browsehappy.com/" target="_blank">升级浏览器</a>
    以获得更好的体验！</p>
<![endif]-->
<!--from here-->
<div class="am-cf am-padding" style="border-bottom: 1px solid #eee;">
    <div class="am-fl am-cf"><strong class="am-text-primary am-text-lg"> Receive Check </strong></div>
</div>
<p></p>
<div class="am-u-sm-12 am-u-md-6">
    <form class="am-form am-form-horizontal" name="RCForm" id="RCForm" method="GET" onsubmit="return toVaild()" action="backend/Receive-Check.php" >
        <div class="am-form-group">
            <label for="SN" class="am-u-sm-3 am-form-label">Serial Number</label>
            <div class="am-u-sm-9">
                <input type="text" name="SN" id="SN" placeholder="Serial Number is the ID of a PMT." onkeyup="OnPropChanged()" onkeydown="if(event.keyCode==13){event.keyCode=0;event.returnValue=false;}" >
                <small id="tipstxt2">Serial Number is the ID of a PMT.</small>
            </div>
        </div>

        <div class="am-form-group">
            <label for="WHR" class="am-u-sm-3 am-form-label">Warehousing Recorder</label>
            <div class="am-u-sm-9">
                <input type="text" name="WHR" id="WHR" placeholder="Warehouse Recorder"  onkeydown="if(event.keyCode==13){event.keyCode=0;event.returnValue=false;}"/>
                <!--<small>邮箱你懂得...</small>-->
            </div>
        </div>

        <div class="am-form-group">
            <label for="RD" class="am-u-sm-3 am-form-label"><!--Receive Date--!>            </label>
            <div class="am-u-sm-9">
                <!-- <input type="text" name="RD" id="RD"  readonly/>--!><!-- onfocus="WdatePicker({lang:'en',dateFmt:'yyyy-mm-dd HH:mm:ss'})"--!>
            </div> 
        </div>

        <div class="am-form-group">
            <label for="MF" class="am-u-sm-3 am-form-label">Manufacturer</label>
            <div class="am-u-sm-9">
                <input type="text" name="MF" id="MF" placeholder="Manufacturer" onkeydown="if(event.keyCode==13){event.keyCode=0;event.returnValue=false;}">
            </div>
        </div>

        <div class="am-form-group">
            <label for="Type" class="am-u-sm-3 am-form-label">Type</label>
            <div class="am-u-sm-9">
                <input type="text" name="Type" id="Type" placeholder="Type" onkeydown="if(event.keyCode==13){event.keyCode=0;event.returnValue=false;}">
            </div>
        </div>

        <div class="am-form-group">
            <label for="PD" class="am-u-sm-3 am-form-label">Product Date</label>
            <div class="am-u-sm-9">
                <input type="text" name="PD" id="PD" placeholder="Product Date" onkeydown="if(event.keyCode==13){event.keyCode=0;event.returnValue=false;}">

            </div>
        </div>

        <div class="am-form-group">
            <label for="BA" class="am-u-sm-3 am-form-label">Box Appearance</label>
            <div class="am-u-sm-9">
                <input type="text" name="BA" id="BA" placeholder="Box Appearance" value="OK" onkeydown="if(event.keyCode==13){event.keyCode=0;event.returnValue=false;}">
            </div>
        </div>

        <div class="am-form-group">
            <label for="WHN" class="am-u-sm-3 am-form-label">Warehousing Note</label>
            <div class="am-u-sm-9">
                <textarea class="" rows="3" name="WHN" id="WHN" placeholder="Input..."></textarea>
                <!-- <small>250字以内写出你的一生...</small>-->
            </div>
        </div>

        <div class="am-u-sm-6 am-fr">
            <input type="submit" class="am-btn am-btn-primary am-btn-xl" value="--->Save Data<---">
            <p></p>
        </div>
    </form>
</div>
<div class="am-u-sm-12 am-u-md-6">
    <div class="am-fl am-cf"><strong class="am-text-primary am-text-lg">The latest 12 records </strong></div>
    <div id="tablelist">
        <!-- ajax会填充表格代码 -->
        <ul></ul>
    </div>
</div>


</div>
<input type="hidden" name="DBSlevel" id="DBSlevel" value="2">
<!--end here-->

<script src="assets/js/amazeui.ie8polyfill.min.js"></script>
<!--[endif]-->

<script src="assets/js/jquery.min.js"></script>
<script src="assets/js/jquery.cookie.js"></script>
<script src="assets/js/junocheck.js"></script>
<script src="assets/js/WRhistory10.js"></script>
<script language="javascript">
    $('#SN').focus();
    window.onload=function(){
//定时器每秒调用一次fnDate()
        setInterval(function(){
            fnDate();
        },1000);
    }
    function fnDate() {

        var d = new Date();

        function addzero(v) {
            if (v < 10) return '0' + v;
            return v.toString();
        }

        var s = d.getFullYear().toString() + '-' + addzero(d.getMonth() + 1) + '-' + addzero(d.getDate()) + ' ' + d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds();

        document.getElementById('RD').value = s;
    }

    function toVaild(){
        var val1 = document.getElementById("SN").value;
        var val2 = document.getElementById("WHR").value;
        var val3 = document.getElementById("RD").value;
        var val4 = document.getElementById("MF").value;
        var val5 = document.getElementById("Type").value;
        var val6 = document.getElementById("PD").value;
        var val7 = document.getElementById("BA").value;
        //允许入库备注置空
        //alert(val);
        if(val1 == ""||val2==""||val3==""||val4==""||val5==""||val6==""||val7==""){
            alert("Something is empty!");
            return false;
        }
        else{
            //alert("ok");
            return true;
        }
    }

    function OnPropChanged() {

        var a = document.getElementById("SN").value;
        var result0 = a.indexOf('EA');
        var result1 = a.indexOf('PA');
        var result3= a.indexOf('-');
        if(result0==0)//返回0说明处于EA左边第0未,即本身
        {
            document.getElementById("MF").value = 'Hamamatsu';
            document.getElementById("Type").value= 'R12860-50';
            var dd = new Date();

            function addzero(v) {
                if (v < 10) return '0' + v;
                return v.toString();
            }

            var ss = dd.getFullYear().toString() + '-' + addzero(dd.getMonth() + 1) + '-' + addzero(dd.getDate());
            document.getElementById("PD").value=ss;
        }
        if(result1==0)//返回0说明处于PA左边第0未,即本身
        {
            document.getElementById("MF").value = 'NNVT';
            document.getElementById("Type").value= 'GDB-6201';

        }
        if(result3==6){

            document.getElementById("PD").value="20"+ a.substring(2,4)+'-'+a.substring(4,6);
        }
        $.ajax({

            url:'backend/checkpmt.php',
            dataType:'text',
            type:'POST',
            data:{'SN':a},
            success: function(json){
                //document.getElementById("WHN").value="This is NO"+ json + "PMT !";
                var NO1=[];
                var NO2=[];
                var NO3=[];

                if(!jQuery.isEmptyObject(json))
                {
                    var dd = document.getElementById('tipstxt');
                    dd.innerHTML = "Tips:We had received this PMT!";
                    //alert("We had received this PMT!");
                }
                else{
                    var dd = document.getElementById('tipstxt');
                    dd.innerHTML = "";
                }


            }

        });
    }
    $.ajax({

        url:'backend/WHR.php',
        dataType:'text',
        type:'POST',
        //data:{'SN':a},
        success: function(json) {
            document.getElementById("WHR").value=json;
        }

    })


</script>
</body>
</html>
