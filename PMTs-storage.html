<!doctype html>
<html class="no-js fixed-layout">
<head>
    <meta http-equiv="Pragma" contect="no-cache">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Homepage</title>
    <meta name="description" content="这是一个 index 页面">
    <meta name="keywords" content="index">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="renderer" content="webkit">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <link rel="icon" type="image/png" href="assets/i/juno.png">
    <link rel="apple-touch-icon-precomposed" href="assets/i/app-icon72x72@2x.png">
    <meta name="apple-mobile-web-app-title" content="Amaze UI" >
    <link rel="stylesheet" href="assets/css/amazeui.min.css">
    <link rel="stylesheet" href="assets/css/admin.css">
    <style>
        .am-align-left p{
            text-indent: 2em;
        }
        .sideActive{
            color: #0e90d2 !important;
        }

    </style>
</head>
<body>
<!--[if lte IE 9]>
<p class="browsehappy">你正在使用<strong>过时</strong>的浏览器。 请 <a href="http://browsehappy.com/" target="_blank">升级浏览器</a>
    以获得更好的体验！</p>
<![endif]-->
<!--from here-->
<div class="am-cf am-padding" style="border-bottom: 1px solid #eee;">
    <div class="am-fl am-cf"><strong class="am-text-primary am-text-lg"> The PMTs' track in warehouse </strong><small class="am-text-primary am-text-lg">(PMTs Storage System)</small></div>
</div>
<p></p>
<div class="am-u-sm-12 am-u-md-6">
    <form class="am-form am-form-horizontal" name="RCForm" id="PSForm" method="GET" onsubmit="return toVaild()" action="backend/PMTs-Storage.php" >
        <div class="am-form-group">
            <label for="SN" class="am-u-sm-3 am-form-label">Serial Number</label>
            <div class="am-u-sm-9">
                <input type="text" name="SN" id="SN" placeholder="Serial Number" onkeyup="queryStage()" onkeydown="if(event.keyCode==13){event.keyCode=0;event.returnValue=false;}" >
                <small>Serial Number is the ID of a PMT.</small>
            </div>
        </div>

        <div class="am-form-group">
            <label for="SR" class="am-u-sm-3 am-form-label">Storage Recorder</label>
            <div class="am-u-sm-9">
                <input type="text" name="SR" id="SR" placeholder="Storage Recorder" onkeydown="if(event.keyCode==13){event.keyCode=0;event.returnValue=false;}"/>
                <!--<small>邮箱你懂得...</small>-->
            </div>
        </div>

        <div class="am-form-group">
            <label for="SW" class="am-u-sm-3 am-form-label">Storage Workers</label>
            <div class="am-u-sm-9">
                <input type="text" name="SW" id="SW" placeholder="Storage Workers" onkeydown="if(event.keyCode==13){event.keyCode=0;event.returnValue=false;}"/>
                <!--<small>邮箱你懂得...</small>-->
            </div>
        </div>

        <div class="am-form-group">
            <label for="SD" class="am-u-sm-3 am-form-label"><!--Storage Date --!>            </label>
            <div class="am-u-sm-9">
                <!-- <input type="text" name="SD" id="SD"  readonly/> --!><!--onfocus="WdatePicker({lang:'en',dateFmt:'yyyy-mm-dd'})"-->
            </div>
        </div>

        <div class="am-form-group">
            <label for="SP" class="am-u-sm-3 am-form-label">Storage Position</label>
            <div class="am-u-sm-9">
                <input type="text" name="SP" id="SP" placeholder="Storage Position" onkeyup="OnPropChanged()" onkeydown="if(event.keyCode==13){event.keyCode=0;event.returnValue=false;}">
                <small>Please use scanner input this!</small>
            </div>
        </div>

        <div class="am-form-group">
            <label for="Status" class="am-u-sm-3 am-form-label">Location</label>
            <div class="am-u-sm-9">
                <input type="text" name="Status" id="Status" placeholder="Location" readonly onkeydown="if(event.keyCode==13){event.keyCode=0;event.returnValue=false;}">
            </div>
        </div>

        <div class="am-form-group">
            <label for="Stage" class="am-u-sm-3 am-form-label">Now Stage</label>
            <div class="am-u-sm-9">
                <input type="text" name="Stage" id="Stage" placeholder="Now Stage"  onkeydown="if(event.keyCode==13){event.keyCode=0;event.returnValue=false;}">
                <small>You needn't to change this value in most time!</small>
            </div>
        </div>

        <div class="am-form-group">
            <label for="SNote" class="am-u-sm-3 am-form-label">Storage Note</label>
            <div class="am-u-sm-9">
                <textarea class="" rows="3" name="SNote" id="SNote" placeholder="Input..."></textarea>
                <!-- <small>250字以内写出你的一生...</small>-->
            </div>
        </div>

        <div class="am-u-sm-6 am-fr" >
            <input type="submit" class="am-btn am-btn-primary am-btn-xl" value="--->Save Data<---">
            <p></p>
        </div>
    </form>
</div>
<div class="am-u-sm-12 am-u-md-6">
    <div class="am-fl am-cf"><strong class="am-text-primary am-text-lg">The latest 12 records </strong></div>
    <div id="tablelist">
        <!-- ajax会填充表格代码 -->
        <ul></ul>
    </div>
</div>

</div>


<input type="hidden" name="DBSlevel" id="DBSlevel" value="2">
<!--end here-->

<script src="assets/js/amazeui.ie8polyfill.min.js"></script>
<!--[endif]-->

<script src="assets/js/jquery.min.js"></script>
<script src="assets/js/jquery.cookie.js"></script>
<script src="assets/js/junocheck.js"></script>
<script src="assets/js/SShistory10.js"></script>
<script language="javascript">
    window.onload=function(){
//定时器每秒调用一次fnDate()
        setInterval(function(){
            fnDate();
        },1000);
    }
    function fnDate() {

        var d = new Date();

        function addzero(v) {
            if (v < 10) return '0' + v;
            return v.toString();
        }

        var s = d.getFullYear().toString() + '-' + addzero(d.getMonth() + 1) + '-' + addzero(d.getDate()) + ' ' + d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds();

        document.getElementById('SD').value = s;
    }

    function OnPropChanged() {

        var a = document.getElementById("SP").value;
        var strs=new Array();
        strs=a.split("-");
        var result3 = strs[0];
        document.getElementById("Status").value =result3;
    }
    function toVaild(){
        var val1 = document.getElementById("SN").value;
        var val2 = document.getElementById("SR").value;
        var val3 = document.getElementById("SW").value;
        var val4 = document.getElementById("SD").value;
        var val5 = document.getElementById("SP").value;
        var val6 = document.getElementById("Status").value;
        var val7 = document.getElementById("Stage").value;
        //允许备注置空
        //alert(val);
        if(val1 == ""||val2==""||val3==""||val4==""||val5==""||val6==""||val7==""){
            alert("Something is empty!");
            return false;
        }
        else{
            //alert("ok");
            return true;
        }
    }
    $.ajax({

        url:'backend/SR.php',
        dataType:'text',
        type:'POST',
        //data:{'SN':a},
        success: function(json) {
            document.getElementById("SR").value=json;

        }
    })
    $.ajax({

        url:'backend/SW.php',
        dataType:'text',
        type:'POST',
        //data:{'SN':a},
        success: function(json) {
            document.getElementById("SW").value=json;

        }
    })


    function queryStage() {
        var sn= document.getElementById("SN").value;
        // alert(sn);
        // $.getJSON("backend/chuli1.php",{SN:sn},function(json){
        //     alert(json,'ok');
        // })
        $.ajax({

            url:'backend/chuli2.php',
            dataType:'text',
            type:'GET',
            data:{'SN':sn},
            success: function(json){
                if(jQuery.isEmptyObject(json)){document.getElementById("Stage").value=1;}
                else{
                    document.getElementById("Stage").value = json;}
            }
        })


    }

</script>
</body>
</html>
